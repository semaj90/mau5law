# Redis Configuration for Nintendo Memory Management
# Legal AI Platform - Nintendo-Style Memory Budgeting

# Memory Management - Nintendo L3 Cache Tier (1GB limit)
maxmemory 1gb
maxmemory-policy allkeys-lru
maxmemory-samples 10

# Persistence Settings
save 900 1     # Save after 900 seconds if at least 1 key changed
save 300 10    # Save after 300 seconds if at least 10 keys changed  
save 60 10000  # Save after 60 seconds if at least 10000 keys changed

# Performance Optimization
tcp-keepalive 300
timeout 0
tcp-backlog 511

# Memory-Efficient Data Structures
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
list-max-ziplist-size -2
list-compress-depth 0
set-max-intset-entries 512
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

# Nintendo-Style Bank Switching Logs
logfile /var/log/redis/nintendo-memory.log
loglevel notice

# Connection Settings
bind 0.0.0.0
protected-mode no
port 6379

# Nintendo Memory Bank Prefixes (for organizational clarity)
# L3-CACHE:query:{hash}     - Cached RAG queries
# L3-CACHE:embed:{hash}     - Cached embeddings  
# L3-CACHE:legal:{hash}     - Legal analysis results
# L3-MEMORY:bank:{id}       - Nintendo memory bank status
# L3-METRICS:perf           - Performance metrics