<!doctype html>
<html lang="en" %sveltekit.theme%>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    
    <!-- Chrome Windows 3D Acceleration & GPU Optimization -->
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#ffd700" />
    <meta name="msapplication-TileColor" content="#ffd700" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    
    <!-- Performance Hints for Chrome -->
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <meta name="prefetch-hints" content="on" />
    <meta name="prerender-hints" content="on" />
    
    <!-- Hardware Acceleration Hints -->
    <meta name="accelerated-compositing" content="enabled" />
    <meta name="gpu-rasterization" content="enabled" />
    <meta name="threaded-compositing" content="enabled" />
    <title>YoRHa Legal AI - Evidence Management System</title>
    <meta
      name="description"
      content="Advanced legal AI evidence management with vector intelligence and semantic analysis"
    />

    <!-- UnoCSS Core Styles -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@unocss/reset/tailwind.min.css"
    />

    <!-- Browser Polyfills for better compatibility -->
    <script>
      // Essential polyfills for Bits UI and modern dependencies
      if (typeof global === 'undefined') {
        var global = globalThis;
      }
      
      // Process polyfill for browser
      if (typeof process === 'undefined') {
        var process = {
          env: { NODE_ENV: 'production', BROWSER: 'true' },
          browser: true,
          version: '',
          versions: { node: '18.0.0' },
          cwd: function() { return '/'; }
        };
      }
      
      // Buffer polyfill if needed
      if (typeof Buffer === 'undefined' && typeof TextEncoder !== 'undefined') {
        var Buffer = {
          from: function(str, encoding) {
            return new TextEncoder().encode(str);
          },
          isBuffer: function(obj) {
            return obj instanceof Uint8Array;
          },
          alloc: function(size) {
            return new Uint8Array(size);
          }
        };
      }
      
      // WebGPU polyfill detection
      window.__webgpuSupported = false;
      window.__webgpuError = null;
      
      // Check for WebGPU support
      if ('gpu' in navigator) {
        navigator.gpu.requestAdapter()
          .then(function(adapter) {
            if (adapter) {
              window.__webgpuSupported = true;
              console.log('WebGPU supported and adapter available');
            } else {
              window.__webgpuError = 'No WebGPU adapter available';
              console.warn('WebGPU: No adapter available');
            }
          })
          .catch(function(error) {
            window.__webgpuError = error.message;
            console.warn('WebGPU adapter request failed:', error);
          });
      } else {
        window.__webgpuError = 'WebGPU not supported in this browser';
        console.warn('WebGPU not supported in this browser');
      }
    </script>

    <!-- NES.css Framework via CDN for faster loading -->
    <link href="https://unpkg.com/nes.css@latest/css/nes.min.css" rel="stylesheet" />
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />

    <!-- YoRHa Interface CSS Variables & Styles -->
    <style>
      :root {
        /* YoRHa Terminal Color Scheme */
        --yorha-primary: #e0e0e0;
        --yorha-primary-dark: #b0b0b0;
        --yorha-secondary: #ffd700;
        --yorha-secondary-dark: #cc8800;
        --yorha-accent: #00ff41;
        --yorha-accent-dark: #00cc33;
        --yorha-danger: #ff0041;
        --yorha-danger-dark: #cc0033;
        
        /* YoRHa Background Colors */
        --yorha-bg-primary: #0a0a0a;
        --yorha-bg-secondary: #1a1a1a;
        --yorha-bg-tertiary: #2a2a2a;
        --yorha-bg-overlay: rgba(0, 0, 0, 0.9);
        
        /* YoRHa Text Colors */
        --yorha-text-primary: #e0e0e0;
        --yorha-text-secondary: #b0b0b0;
        --yorha-text-muted: #808080;
        --yorha-text-accent: #ffd700;
        
        /* YoRHa Terminal Fonts */
        --yorha-font-primary: 'JetBrains Mono', 'Courier New', monospace;
        --yorha-font-secondary: 'Orbitron', 'Arial', sans-serif;
        --yorha-font-ui: 'Rajdhani', 'Arial', sans-serif;
        
        /* Shadcn-compatible theme variables (YoRHa themed) */
        --background: 0 0% 4%;
        --foreground: 0 0% 88%;
        --card: 0 0% 10%;
        --card-foreground: 0 0% 88%;
        --popover: 0 0% 6%;
        --popover-foreground: 0 0% 88%;
        --primary: 51 100% 50%;
        --primary-foreground: 0 0% 4%;
        --secondary: 0 0% 69%;
        --secondary-foreground: 0 0% 4%;
        --muted: 0 0% 16%;
        --muted-foreground: 0 0% 50%;
        --accent: 126 100% 50%;
        --accent-foreground: 0 0% 4%;
        --destructive: 348 100% 50%;
        --destructive-foreground: 0 0% 88%;
        --border: 0 0% 38%;
        --input: 0 0% 16%;
        --ring: 51 100% 50%;
        --radius: 0.25rem;
      }

      * {
        border-color: hsl(var(--border));
      }

      html {
        background: linear-gradient(135deg, var(--yorha-bg-primary) 0%, var(--yorha-bg-secondary) 50%, var(--yorha-bg-tertiary) 100%);
        color: var(--yorha-text-primary);
        font-family: var(--yorha-font-ui);
        overflow-x: hidden;
        
        /* Chrome Windows GPU Acceleration */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeSpeed;
        image-rendering: -webkit-optimize-contrast;
        
        /* Hardware acceleration for smooth scrolling */
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
      }

      body {
        margin: 0;
        padding: 0;
        min-height: 100vh;
        background: transparent;
        font-family: var(--yorha-font-ui);
        line-height: 1.6;
        
        /* Chrome Windows 3D Acceleration */
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        will-change: transform;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        -webkit-perspective: 1000;
        perspective: 1000;
      }
      
      /* YoRHa Terminal Grid Background - GPU Accelerated */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: 
          linear-gradient(rgba(255, 215, 0, 0.05) 1px, transparent 1px),
          linear-gradient(90deg, rgba(255, 215, 0, 0.05) 1px, transparent 1px);
        background-size: 24px 24px;
        pointer-events: none;
        z-index: -1;
        
        /* GPU Acceleration for background pattern */
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        will-change: transform;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
      }

      /* YoRHa Terminal Scrollbar */
      ::-webkit-scrollbar {
        width: 12px;
        height: 12px;
      }
      
      ::-webkit-scrollbar-track {
        background: var(--yorha-bg-primary);
        border: 2px solid var(--yorha-bg-tertiary);
      }
      
      ::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, var(--yorha-secondary) 0%, var(--yorha-secondary-dark) 100%);
        border-radius: 0;
        border: 1px solid var(--yorha-text-muted);
      }
      
      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(180deg, var(--yorha-accent) 0%, var(--yorha-accent-dark) 100%);
      }

      /* YoRHa Terminal Typography */
      h1, h2, h3, h4, h5, h6 {
        font-family: var(--yorha-font-secondary);
        color: var(--yorha-text-primary);
        text-transform: uppercase;
        letter-spacing: 2px;
        font-weight: 400;
      }
      
      h1 {
        font-size: 2.5rem;
        font-weight: 700;
        text-shadow: 0 0 10px var(--yorha-secondary);
        border-bottom: 2px solid var(--yorha-secondary);
        padding-bottom: 0.5rem;
      }

      /* NES.css Integration with YoRHa Terminal Styles */
      .nes-input, .nes-textarea, .nes-select > select {
        font-family: 'Press Start 2P', var(--yorha-font-primary), monospace !important;
        background: var(--yorha-bg-secondary) !important;
        color: var(--yorha-text-primary) !important;
        border-color: var(--yorha-text-muted) !important;
      }
      
      .nes-input:focus, .nes-textarea:focus, .nes-select > select:focus {
        border-color: var(--yorha-secondary) !important;
        box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.3) !important;
        background: var(--yorha-bg-tertiary) !important;
      }
      
      /* NES.css Container Defaults */
      .nes-container {
        background: var(--yorha-bg-secondary) !important;
        color: var(--yorha-text-primary) !important;
        border-color: var(--yorha-text-muted) !important;
        font-family: 'Press Start 2P', var(--yorha-font-primary), monospace !important;
      }
      
      .nes-container.with-title > .title {
        background: var(--yorha-bg-primary) !important;
        color: var(--yorha-text-accent) !important;
        font-family: 'Press Start 2P', var(--yorha-font-secondary), monospace !important;
      }
      
      .nes-container.is-centered {
        text-align: center !important;
      }
      
      .nes-container.is-rounded {
        border-color: var(--yorha-secondary) !important;
      }
      
      .nes-container.is-success {
        border-color: var(--yorha-accent) !important;
        background: rgba(0, 255, 65, 0.1) !important;
      }
      
      .nes-container.is-error {
        border-color: var(--yorha-danger) !important;
        background: rgba(255, 0, 65, 0.1) !important;
      }
      
      .nes-btn {
        font-family: 'Press Start 2P', var(--yorha-font-primary), monospace !important;
        color: var(--yorha-text-primary) !important;
      }
      
      .nes-btn.is-success {
        background: var(--yorha-accent) !important;
        border-color: var(--yorha-accent-dark) !important;
        color: #000000 !important;
      }
      
      .nes-text.is-error {
        color: var(--yorha-danger) !important;
      }
      
      /* NES.css field labels */
      .nes-field > label {
        font-family: 'Press Start 2P', var(--yorha-font-secondary), monospace !important;
        color: var(--yorha-text-accent) !important;
        font-size: 12px !important;
        margin-bottom: 8px !important;
        display: block !important;
      }
      
      /* NES.css Select Defaults */
      .nes-select:after {
        border-color: var(--yorha-text-accent) transparent transparent transparent !important;
      }
      
      .nes-select > select {
        font-family: 'Press Start 2P', var(--yorha-font-primary), monospace !important;
        background: var(--yorha-bg-secondary) !important;
        color: var(--yorha-text-primary) !important;
        border-color: var(--yorha-text-muted) !important;
        font-size: 12px !important;
      }
      
      .nes-select > select:focus {
        border-color: var(--yorha-secondary) !important;
        box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.3) !important;
        background: var(--yorha-bg-tertiary) !important;
      }
      
      /* Default select styling for non-NES elements */
      select:not(.nes-select > select) {
        font-family: 'Press Start 2P', var(--yorha-font-primary), monospace !important;
        background: var(--yorha-bg-secondary) !important;
        color: var(--yorha-text-primary) !important;
        border: 2px solid var(--yorha-text-muted) !important;
        padding: 8px 12px !important;
        font-size: 12px !important;
      }

      /* YoRHa Terminal Link Styles */
      a {
        color: var(--yorha-secondary);
        text-decoration: none;
        transition: all 0.2s ease;
        border-bottom: 1px solid transparent;
      }
      
      a:hover {
        color: var(--yorha-accent);
        text-shadow: 0 0 4px currentColor;
        border-bottom: 1px solid currentColor;
      }

      /* GPU Acceleration Utility Classes for Chrome Windows */
      .gpu-accelerated {
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        will-change: transform;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
      }
      
      .gpu-smooth-scroll {
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
      }
      
      .gpu-optimized-text {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeSpeed;
      }
      
      /* 3D Transform Performance Optimizations */
      .transform-3d {
        -webkit-perspective: 1000px;
        perspective: 1000px;
        -webkit-transform-style: preserve-3d;
        transform-style: preserve-3d;
      }
      
      /* Animation Performance Classes */
      .animate-gpu {
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        will-change: transform, opacity;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
      }
      
      /* Chrome Windows Specific Optimizations */
      @media screen and (-webkit-min-device-pixel-ratio: 0) {
        .chrome-optimized {
          -webkit-font-feature-settings: 'liga';
          font-feature-settings: 'liga';
          -webkit-font-kerning: auto;
          font-kerning: auto;
        }
      }
    </style>

    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover" class="min-h-screen antialiased gpu-accelerated gpu-optimized-text chrome-optimized">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
