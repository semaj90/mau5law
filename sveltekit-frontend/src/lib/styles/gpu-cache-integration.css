/**
 * GPU Cache Integration - Custom CSS for SvelteKit Frontend
 * Integrates NES-GPU memory architecture with N64 texture filtering
 * 
 * Architecture: 8-bit → 16-bit → N64 3D → YoRHa Progression
 * - NES Memory Banks (PRG_ROM, CHR_ROM, RAM, PPU_MEMORY)
 * - GPU Texture Filtering Cache (bilinear, trilinear, anisotropic)
 * - WebGPU Acceleration with WASM integration
 * - XState Graph Cache Machine orchestration
 */

/* === ROOT VARIABLES - GPU CACHE INTEGRATION === */
:root {
  /* NES Memory Bank Colors */
  --nes-prg-rom: #ff6b35;      /* Program ROM - Orange */
  --nes-chr-rom: #4ecdc4;      /* Character ROM - Teal */
  --nes-ram: #45b7d1;          /* RAM - Blue */
  --nes-ppu-memory: #96ceb4;   /* PPU Memory - Green */
  --nes-sprite-memory: #ffeaa7; /* Sprite Memory - Yellow */
  --nes-palette-memory: #dda0dd; /* Palette Memory - Plum */

  /* Texture Filtering Quality Levels */
  --texture-bilinear: #ffb347;    /* Standard - Orange */
  --texture-trilinear: #87ceeb;   /* High - Sky Blue */
  --texture-anisotropic: #98fb98; /* Ultra - Pale Green */
  
  /* Cache Performance States */
  --cache-hit: #00ff41;        /* Cache Hit - Bright Green */
  --cache-miss: #ff073a;       /* Cache Miss - Bright Red */
  --cache-pending: #ffa500;    /* Pending - Orange */
  --cache-stale: #ffff00;      /* Stale - Yellow */
  
  /* GPU Acceleration Indicators */
  --gpu-accelerated: #00ffff;  /* WebGPU Active - Cyan */
  --wasm-accelerated: #ff00ff; /* WASM Active - Magenta */
  --cpu-fallback: #c0c0c0;     /* CPU Fallback - Silver */
  
  /* Performance Metrics Colors */
  --perf-excellent: #00ff00;   /* 90-100% */
  --perf-good: #7fff00;        /* 70-90% */
  --perf-fair: #ffff00;        /* 50-70% */
  --perf-poor: #ff4500;        /* 30-50% */
  --perf-critical: #ff0000;    /* 0-30% */
  
  /* N64 3D Rendering Effects */
  --n64-depth-near: #4a90e2;
  --n64-depth-far: #1e3a8a;
  --n64-fog-color: rgba(135, 206, 235, 0.3);
  --n64-mipmap-base: #ffffff;
  --n64-mipmap-level1: #f0f0f0;
  --n64-mipmap-level2: #e0e0e0;
  
  /* YoRHa Theme Integration */
  --yorha-cache-primary: #c4b49a;
  --yorha-cache-secondary: #b5a48a;
  --yorha-cache-accent: #d4af37;
  --yorha-cache-dark: #2d2d2d;
  
  /* Animation Timings */
  --cache-transition-fast: 0.1s;
  --cache-transition-normal: 0.3s;
  --cache-transition-slow: 0.6s;
  --gpu-pulse-duration: 2s;
}

/* === NES MEMORY BANK VISUALIZATION === */
.nes-memory-bank {
  position: relative;
  border: 2px solid var(--nes-border, #666);
  border-radius: 4px;
  padding: 8px;
  margin: 4px;
  font-family: 'Courier New', monospace;
  font-size: 12px;
  background: linear-gradient(135deg, var(--bank-color, #333) 0%, rgba(0,0,0,0.2) 100%);
  transition: all var(--cache-transition-normal) ease;
}

.nes-memory-bank::before {
  content: attr(data-bank-name);
  position: absolute;
  top: -12px;
  left: 8px;
  background: var(--bank-color, #333);
  color: white;
  padding: 2px 6px;
  font-size: 10px;
  font-weight: bold;
  border-radius: 2px;
  text-transform: uppercase;
}

/* Memory Bank Types */
.nes-memory-bank[data-bank="PRG_ROM"] {
  --bank-color: var(--nes-prg-rom);
  --nes-border: var(--nes-prg-rom);
}

.nes-memory-bank[data-bank="CHR_ROM"] {
  --bank-color: var(--nes-chr-rom);
  --nes-border: var(--nes-chr-rom);
}

.nes-memory-bank[data-bank="RAM"] {
  --bank-color: var(--nes-ram);
  --nes-border: var(--nes-ram);
}

.nes-memory-bank[data-bank="PPU_MEMORY"] {
  --bank-color: var(--nes-ppu-memory);
  --nes-border: var(--nes-ppu-memory);
}

.nes-memory-bank[data-bank="SPRITE_MEMORY"] {
  --bank-color: var(--nes-sprite-memory);
  --nes-border: var(--nes-sprite-memory);
}

.nes-memory-bank[data-bank="PALETTE_MEMORY"] {
  --bank-color: var(--nes-palette-memory);
  --nes-border: var(--nes-palette-memory);
}

/* === TEXTURE FILTERING QUALITY INDICATORS === */
.texture-filtering-indicator {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border: 1px solid currentColor;
  transition: all var(--cache-transition-fast) ease;
}

.texture-filtering-indicator.bilinear {
  background: var(--texture-bilinear);
  color: #8b4513;
}

.texture-filtering-indicator.trilinear {
  background: var(--texture-trilinear);
  color: #000080;
}

.texture-filtering-indicator.anisotropic {
  background: var(--texture-anisotropic);
  color: #006400;
  box-shadow: 0 0 8px var(--texture-anisotropic);
}

/* === CACHE STATUS VISUALIZATION === */
.gpu-cache-status {
  position: relative;
  display: inline-block;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: 2px solid currentColor;
  transition: all var(--cache-transition-normal) ease;
}

.gpu-cache-status::after {
  content: '';
  position: absolute;
  inset: 1px;
  border-radius: 50%;
  transition: background var(--cache-transition-fast) ease;
}

/* Cache Status States */
.gpu-cache-status.hit {
  color: var(--cache-hit);
  animation: cache-pulse var(--gpu-pulse-duration) ease-in-out infinite;
}

.gpu-cache-status.hit::after {
  background: var(--cache-hit);
}

.gpu-cache-status.miss {
  color: var(--cache-miss);
}

.gpu-cache-status.miss::after {
  background: var(--cache-miss);
  animation: cache-miss-flash 0.5s ease-in-out;
}

.gpu-cache-status.pending {
  color: var(--cache-pending);
  animation: cache-loading 1s linear infinite;
}

.gpu-cache-status.pending::after {
  background: conic-gradient(var(--cache-pending) 0deg, transparent 180deg, var(--cache-pending) 360deg);
}

.gpu-cache-status.stale {
  color: var(--cache-stale);
}

.gpu-cache-status.stale::after {
  background: var(--cache-stale);
  opacity: 0.6;
}

/* === GPU ACCELERATION INDICATORS === */
.gpu-acceleration-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 1px 4px;
  font-size: 9px;
  font-weight: bold;
  border-radius: 6px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  border: 1px solid currentColor;
}

.gpu-acceleration-badge.webgpu {
  background: rgba(0, 255, 255, 0.2);
  color: var(--gpu-accelerated);
  border-color: var(--gpu-accelerated);
}

.gpu-acceleration-badge.wasm {
  background: rgba(255, 0, 255, 0.2);
  color: var(--wasm-accelerated);
  border-color: var(--wasm-accelerated);
}

.gpu-acceleration-badge.cpu-fallback {
  background: rgba(192, 192, 192, 0.2);
  color: var(--cpu-fallback);
  border-color: var(--cpu-fallback);
}

/* === PERFORMANCE METERS === */
.gpu-performance-meter {
  position: relative;
  width: 100px;
  height: 6px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.gpu-performance-meter::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: var(--meter-value, 0%);
  background: var(--meter-color, var(--perf-good));
  border-radius: 3px;
  transition: width var(--cache-transition-normal) ease, background var(--cache-transition-normal) ease;
}

/* Performance Level Colors */
.gpu-performance-meter[data-performance="excellent"] {
  --meter-color: var(--perf-excellent);
}

.gpu-performance-meter[data-performance="good"] {
  --meter-color: var(--perf-good);
}

.gpu-performance-meter[data-performance="fair"] {
  --meter-color: var(--perf-fair);
}

.gpu-performance-meter[data-performance="poor"] {
  --meter-color: var(--perf-poor);
}

.gpu-performance-meter[data-performance="critical"] {
  --meter-color: var(--perf-critical);
  animation: performance-warning 1s ease-in-out infinite alternate;
}

/* === N64 3D RENDERING EFFECTS === */
.n64-depth-buffer {
  position: relative;
  background: linear-gradient(to bottom, 
    var(--n64-depth-near) 0%, 
    var(--n64-depth-far) 100%);
  overflow: hidden;
}

.n64-depth-buffer::after {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--n64-fog-color);
  pointer-events: none;
}

.n64-mipmap-level {
  position: relative;
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all var(--cache-transition-normal) ease;
}

.n64-mipmap-level[data-level="0"] {
  background: var(--n64-mipmap-base);
  filter: contrast(1.0) brightness(1.0);
}

.n64-mipmap-level[data-level="1"] {
  background: var(--n64-mipmap-level1);
  filter: contrast(0.95) brightness(0.98);
}

.n64-mipmap-level[data-level="2"] {
  background: var(--n64-mipmap-level2);
  filter: contrast(0.9) brightness(0.95);
}

/* === YORHA CACHE INTEGRATION === */
.yorha-cache-panel {
  background: linear-gradient(135deg, 
    var(--yorha-cache-dark) 0%, 
    rgba(45, 45, 45, 0.95) 100%);
  border: 1px solid var(--yorha-cache-primary);
  color: var(--yorha-cache-primary);
  font-family: 'JetBrains Mono', 'Courier New', monospace;
  position: relative;
  overflow: hidden;
}

.yorha-cache-panel::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 2px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    var(--yorha-cache-accent) 50%, 
    transparent 100%);
  animation: yorha-scan 3s linear infinite;
}

.yorha-cache-header {
  background: var(--yorha-cache-primary);
  color: var(--yorha-cache-dark);
  padding: 4px 8px;
  font-size: 10px;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 1px;
  border-bottom: 1px solid var(--yorha-cache-accent);
}

/* === GRAPH CACHE MACHINE STATES === */
.graph-cache-state {
  position: relative;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: bold;
  text-transform: uppercase;
  border: 1px solid currentColor;
  transition: all var(--cache-transition-normal) ease;
}

.graph-cache-state.initializing {
  background: rgba(255, 165, 0, 0.2);
  color: #ffa500;
  animation: state-pulse var(--gpu-pulse-duration) ease-in-out infinite;
}

.graph-cache-state.idle {
  background: rgba(0, 255, 0, 0.1);
  color: #00ff00;
}

.graph-cache-state.querying {
  background: rgba(0, 191, 255, 0.2);
  color: #00bfff;
  animation: state-processing 1s linear infinite;
}

.graph-cache-state.backgroundRefreshing {
  background: rgba(255, 255, 0, 0.2);
  color: #ffff00;
  animation: state-refresh 2s ease-in-out infinite;
}

.graph-cache-state.rehydrated {
  background: rgba(0, 255, 0, 0.3);
  color: #00ff00;
  animation: state-success 0.5s ease-out;
}

.graph-cache-state.error {
  background: rgba(255, 0, 0, 0.3);
  color: #ff0000;
  animation: state-error 1s ease-in-out infinite alternate;
}

/* === INTEGRATED COMPONENT STYLES === */

/* Gaming Progression Indicators */
.gaming-progression {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.gaming-era {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 4px;
  border-radius: 4px;
  font-size: 9px;
  font-weight: bold;
  text-transform: uppercase;
  transition: all var(--cache-transition-normal) ease;
}

.gaming-era.nes-8bit {
  background: linear-gradient(45deg, #ff6b35, #f7931e);
  color: white;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
}

.gaming-era.snes-16bit {
  background: linear-gradient(45deg, #4ecdc4, #44a08d);
  color: white;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
}

.gaming-era.n64-3d {
  background: linear-gradient(45deg, #667eea, #764ba2);
  color: white;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
}

.gaming-era.yorha-quantum {
  background: linear-gradient(45deg, var(--yorha-cache-primary), var(--yorha-cache-accent));
  color: var(--yorha-cache-dark);
  text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
  box-shadow: 0 2px 12px var(--yorha-cache-accent);
}

/* Enhanced Button States with GPU Cache Integration */
.gpu-enhanced-button {
  position: relative;
  transition: all var(--cache-transition-normal) ease;
  overflow: hidden;
}

.gpu-enhanced-button::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--cache-hit);
  opacity: 0;
  transition: opacity var(--cache-transition-fast) ease;
}

.gpu-enhanced-button[data-cache-status="hit"]::before {
  opacity: 1;
  animation: cache-indicator-pulse var(--gpu-pulse-duration) ease-in-out infinite;
}

.gpu-enhanced-button[data-cache-status="miss"]::before {
  background: var(--cache-miss);
  opacity: 1;
}

.gpu-enhanced-button[data-cache-status="pending"]::before {
  background: var(--cache-pending);
  opacity: 1;
  animation: cache-indicator-spin 1s linear infinite;
}

/* Texture Quality Enhancement */
.texture-quality-enhanced {
  image-rendering: optimizeQuality;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: -moz-crisp-edges;
  image-rendering: pixelated;
  transition: filter var(--cache-transition-normal) ease;
}

.texture-quality-enhanced[data-filtering="bilinear"] {
  filter: contrast(1.0) brightness(1.0);
}

.texture-quality-enhanced[data-filtering="trilinear"] {
  filter: contrast(1.05) brightness(1.02) saturate(1.05);
}

.texture-quality-enhanced[data-filtering="anisotropic"] {
  filter: contrast(1.1) brightness(1.05) saturate(1.1) sharpen(0.1);
}

/* === ANIMATIONS === */
@keyframes cache-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.1); }
}

@keyframes cache-miss-flash {
  0% { opacity: 1; }
  50% { opacity: 0.3; }
  100% { opacity: 1; }
}

@keyframes cache-loading {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes cache-indicator-pulse {
  0%, 100% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.2); opacity: 1; }
}

@keyframes cache-indicator-spin {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(180deg) scale(1.1); }
  100% { transform: rotate(360deg) scale(1); }
}

@keyframes yorha-scan {
  0% { left: -100%; }
  100% { left: 100%; }
}

@keyframes state-pulse {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

@keyframes state-processing {
  0% { background-position: 0% 0%; }
  100% { background-position: 100% 0%; }
}

@keyframes state-refresh {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes state-success {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

@keyframes state-error {
  0% { opacity: 0.8; }
  100% { opacity: 1; }
}

@keyframes performance-warning {
  0% { box-shadow: 0 0 5px var(--perf-critical); }
  100% { box-shadow: 0 0 15px var(--perf-critical), 0 0 25px var(--perf-critical); }
}

/* === UTILITY CLASSES === */
.gpu-cache-hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateY(-10px);
  transition: all var(--cache-transition-normal) ease;
}

.gpu-cache-visible {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
  transition: all var(--cache-transition-normal) ease;
}

.gpu-accelerated {
  will-change: transform, opacity;
  backface-visibility: hidden;
  perspective: 1000px;
}

.memory-optimized {
  contain: layout style paint;
}

.performance-critical {
  contain: strict;
  content-visibility: auto;
}

/* === RESPONSIVE DESIGN === */
@media (max-width: 768px) {
  .nes-memory-bank {
    margin: 2px;
    padding: 4px;
  }
  
  .gaming-progression {
    flex-wrap: wrap;
    gap: 4px;
  }
  
  .gpu-performance-meter {
    width: 60px;
    height: 4px;
  }
}

/* === HIGH CONTRAST MODE === */
@media (prefers-contrast: high) {
  .gpu-cache-status {
    border-width: 3px;
  }
  
  .texture-filtering-indicator,
  .gpu-acceleration-badge,
  .graph-cache-state {
    border-width: 2px;
  }
}

/* === REDUCED MOTION === */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .gpu-cache-status,
  .gaming-era,
  .gpu-enhanced-button {
    animation: none !important;
  }
}

/* === PRINT STYLES === */
@media print {
  .gpu-cache-status,
  .gpu-acceleration-badge,
  .gpu-performance-meter {
    display: none;
  }
  
  .yorha-cache-panel {
    background: white;
    color: black;
    border: 1px solid black;
  }
}