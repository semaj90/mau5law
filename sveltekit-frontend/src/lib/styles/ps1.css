/**
 * PS1.css - PlayStation 1 Era Visual Effects
 * Anti-aliasing, subsampling, dynamic parallax, and anisotropic emphasis
 * Extended experimental visual feature coverage
 */

/* ==== ANTI-ALIASING EFFECTS ==== */

/* Soft anti-aliasing for PS1-style edges */
.ps1-aa-soft {
  filter: blur(0.3px) contrast(1.1);
  image-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeSpeed;
}

.ps1-aa-soft::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    45deg,
    rgba(255, 255, 255, 0.02) 0%,
    transparent 25%,
    rgba(255, 255, 255, 0.01) 50%,
    transparent 75%,
    rgba(255, 255, 255, 0.02) 100%
  );
  pointer-events: none;
  mix-blend-mode: overlay;
}

/* Sharp anti-aliasing with edge enhancement */
.ps1-aa-sharp {
  filter: contrast(1.2) brightness(1.05) saturate(1.1);
  image-rendering: crisp-edges;
  image-rendering: -webkit-optimize-contrast;
  -webkit-font-smoothing: none;
  text-rendering: geometricPrecision;
}

.ps1-aa-sharp::before {
  content: '';
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  bottom: -1px;
  background: 
    linear-gradient(0deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
  background-size: 2px 2px;
  pointer-events: none;
  z-index: -1;
}

/* ==== SUBSAMPLING EFFECTS ==== */

/* Standard subsampling effect */
.ps1-subsample {
  position: relative;
  filter: contrast(0.9) brightness(1.1);
}

.ps1-subsample::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    repeating-linear-gradient(
      0deg,
      transparent 0px,
      transparent 1px,
      rgba(0, 0, 0, 0.08) 1px,
      rgba(0, 0, 0, 0.08) 2px
    );
  pointer-events: none;
  z-index: 1;
  mix-blend-mode: multiply;
}

/* Sharp subsampling with enhanced contrast */
.ps1-subsample-sharp {
  position: relative;
  filter: contrast(1.3) brightness(0.95) saturate(1.2);
}

.ps1-subsample-sharp::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    repeating-linear-gradient(
      0deg,
      rgba(255, 255, 255, 0.03) 0px,
      rgba(255, 255, 255, 0.03) 0.5px,
      rgba(0, 0, 0, 0.12) 0.5px,
      rgba(0, 0, 0, 0.12) 1px
    ),
    repeating-linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.02) 0px,
      rgba(255, 255, 255, 0.02) 0.5px,
      rgba(0, 0, 0, 0.08) 0.5px,
      rgba(0, 0, 0, 0.08) 1px
    );
  background-size: 1px 1px;
  pointer-events: none;
  z-index: 1;
  mix-blend-mode: overlay;
}

/* ==== DYNAMIC PARALLAX EFFECTS ==== */

/* Base dynamic parallax container */
.ps1-parallax-dyn {
  position: relative;
  transform-style: preserve-3d;
  perspective: 1000px;
  overflow: hidden;
}

/* Parallax layers with CSS custom properties */
.ps1-parallax-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  will-change: transform;
  transform: 
    translateX(calc(var(--px, 0) * var(--parallax-factor, 1) * 1px))
    translateY(calc(var(--py, 0) * var(--parallax-factor, 1) * 1px))
    translateZ(calc(var(--pz, 0) * 1px));
}

/* Parallax depth variations */
.ps1-parallax-near {
  --parallax-factor: 0.2;
  z-index: 10;
}

.ps1-parallax-mid {
  --parallax-factor: 0.5;
  z-index: 5;
}

.ps1-parallax-far {
  --parallax-factor: 1.0;
  z-index: 1;
}

.ps1-parallax-background {
  --parallax-factor: 1.5;
  z-index: 0;
  opacity: 0.8;
}

/* Dynamic parallax with mouse interaction */
.ps1-parallax-interactive {
  transition: transform 0.1s ease-out;
}

.ps1-parallax-interactive:hover {
  transform: 
    translateX(calc(var(--px, 0) * var(--parallax-factor, 1) * 2px))
    translateY(calc(var(--py, 0) * var(--parallax-factor, 1) * 2px))
    translateZ(calc(var(--pz, 0) * 2px));
}

/* ==== ANISOTROPIC EMPHASIS (NVIDIA OPTIMIZED) ==== */

/* Base anisotropic effect */
.ps1-aniso-nv {
  position: relative;
  filter: contrast(1.15) saturate(1.1);
}

.ps1-aniso-nv::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    linear-gradient(
      45deg,
      rgba(0, 255, 0, 0.02) 0%,
      transparent 25%,
      rgba(0, 255, 255, 0.02) 50%,
      transparent 75%,
      rgba(255, 0, 255, 0.02) 100%
    );
  pointer-events: none;
  z-index: 1;
  animation: anisotropic-sweep 8s linear infinite;
}

/* NVIDIA-specific optimizations */
.ps1-aniso-nv-optimized {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform, filter;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Enhanced anisotropic with tensor core hints */
.ps1-aniso-tensor {
  position: relative;
  filter: contrast(1.2) saturate(1.15) brightness(1.02);
}

.ps1-aniso-tensor::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    conic-gradient(
      from 0deg,
      rgba(76, 175, 80, 0.03),   /* Green - RTX */
      rgba(33, 150, 243, 0.03),  /* Blue - CUDA */
      rgba(255, 193, 7, 0.03),   /* Amber - Tensor */
      rgba(156, 39, 176, 0.03),  /* Purple - OptiX */
      rgba(76, 175, 80, 0.03)    /* Back to green */
    );
  pointer-events: none;
  z-index: 2;
  animation: tensor-rotation 12s ease-in-out infinite;
  mix-blend-mode: color-dodge;
  opacity: 0.6;
}

/* ==== GPU ACCELERATION HINTS ==== */

/* High performance GPU hint */
.ps1-gpu-hint-high-perf {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform, opacity, filter;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-perspective: 1000;
  perspective: 1000;
  transform-style: preserve-3d;
  image-rendering: -webkit-optimize-contrast;
}

/* Power save GPU hint */
.ps1-gpu-hint-power-save {
  -webkit-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
  will-change: auto;
  image-rendering: auto;
  filter: none;
}

/* Memory optimized hint */
.ps1-gpu-hint-memory-opt {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform;
  contain: layout style paint;
  content-visibility: auto;
}

/* ==== EXPERIMENTAL VISUAL FEATURES ==== */

/* CRT Phosphor Glow Enhanced */
.ps1-crt-phosphor-enhanced {
  position: relative;
  filter: brightness(1.1) contrast(1.05);
}

.ps1-crt-phosphor-enhanced::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: radial-gradient(
    ellipse at center,
    rgba(0, 255, 0, 0.1) 0%,
    rgba(0, 255, 0, 0.05) 30%,
    rgba(255, 0, 0, 0.05) 60%,
    rgba(0, 0, 255, 0.05) 80%,
    transparent 100%
  );
  filter: blur(1px);
  pointer-events: none;
  z-index: -1;
  animation: phosphor-glow 4s ease-in-out infinite alternate;
}

/* Stereoscopic Anaglyph Enhanced */
.ps1-stereoscopic-enhanced {
  position: relative;
}

.ps1-stereoscopic-enhanced::before,
.ps1-stereoscopic-enhanced::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  mix-blend-mode: screen;
}

.ps1-stereoscopic-enhanced::before {
  background: 
    linear-gradient(
      45deg,
      rgba(255, 0, 0, 0.15) 0%,
      transparent 50%,
      rgba(255, 0, 0, 0.1) 100%
    );
  transform: translateX(-1px);
  z-index: 1;
}

.ps1-stereoscopic-enhanced::after {
  background: 
    linear-gradient(
      -45deg,
      rgba(0, 255, 255, 0.15) 0%,
      transparent 50%,
      rgba(0, 255, 255, 0.1) 100%
    );
  transform: translateX(1px);
  z-index: 2;
}

/* Texture Warp with Affine Mapping */
.ps1-texture-warp-affine {
  position: relative;
  transform-style: preserve-3d;
  perspective: 800px;
  overflow: hidden;
}

.ps1-texture-warp-affine::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    linear-gradient(
      calc(var(--warp-angle, 0) * 1deg),
      rgba(255, 255, 255, 0.03) 0%,
      transparent 25%,
      rgba(255, 255, 255, 0.02) 50%,
      transparent 75%,
      rgba(255, 255, 255, 0.03) 100%
    );
  transform: 
    perspective(800px) 
    rotateX(calc(var(--warp-x, 0) * 0.5deg))
    rotateY(calc(var(--warp-y, 0) * 0.5deg))
    skewX(calc(var(--warp-skew-x, 0) * 0.2deg))
    skewY(calc(var(--warp-skew-y, 0) * 0.2deg));
  pointer-events: none;
  z-index: 1;
  animation: affine-warp 10s ease-in-out infinite;
}

/* Vertex Jitter Effect */
.ps1-vertex-jitter {
  position: relative;
  animation: vertex-jitter 0.1s steps(2, jump-none) infinite;
}

.ps1-vertex-jitter-subtle {
  animation: vertex-jitter-subtle 0.2s steps(4, jump-none) infinite;
}

.ps1-vertex-jitter-intense {
  animation: vertex-jitter-intense 0.05s steps(1, jump-none) infinite;
}

/* ==== FALLBACK PATTERNS ==== */

/* Reduced motion fallbacks */
@media (prefers-reduced-motion: reduce) {
  .ps1-parallax-dyn,
  .ps1-parallax-interactive,
  .ps1-aniso-nv::before,
  .ps1-aniso-tensor::after,
  .ps1-crt-phosphor-enhanced::before,
  .ps1-texture-warp-affine::before,
  .ps1-vertex-jitter,
  .ps1-vertex-jitter-subtle,
  .ps1-vertex-jitter-intense {
    animation: none !important;
    transform: none !important;
    transition: none !important;
  }
}

/* Low memory device fallbacks */
@media (max-width: 768px) and (max-height: 1024px) {
  .ps1-subsample::before,
  .ps1-subsample-sharp::before,
  .ps1-aa-soft::after,
  .ps1-aniso-tensor::after {
    display: none;
  }
  
  .ps1-crt-phosphor-enhanced::before {
    filter: none;
  }
  
  .ps1-texture-warp-affine {
    perspective: none;
  }
}

/* High contrast mode adjustments */
@media (prefers-contrast: high) {
  .ps1-aa-soft {
    filter: contrast(1.5) brightness(1.1);
  }
  
  .ps1-subsample-sharp {
    filter: contrast(1.8) brightness(0.9);
  }
  
  .ps1-aniso-nv,
  .ps1-aniso-tensor {
    filter: contrast(1.4) saturate(1.3);
  }
}

/* ==== ANIMATIONS ==== */

@keyframes anisotropic-sweep {
  0% { 
    transform: translateX(-100%) rotate(0deg);
    opacity: 0.5;
  }
  25% { 
    transform: translateX(-50%) rotate(90deg);
    opacity: 0.8;
  }
  50% { 
    transform: translateX(0%) rotate(180deg);
    opacity: 1;
  }
  75% { 
    transform: translateX(50%) rotate(270deg);
    opacity: 0.8;
  }
  100% { 
    transform: translateX(100%) rotate(360deg);
    opacity: 0.5;
  }
}

@keyframes tensor-rotation {
  0% { 
    transform: rotate(0deg) scale(1);
    opacity: 0.6;
  }
  25% { 
    transform: rotate(90deg) scale(1.02);
    opacity: 0.7;
  }
  50% { 
    transform: rotate(180deg) scale(1);
    opacity: 0.8;
  }
  75% { 
    transform: rotate(270deg) scale(0.98);
    opacity: 0.7;
  }
  100% { 
    transform: rotate(360deg) scale(1);
    opacity: 0.6;
  }
}

@keyframes phosphor-glow {
  0% { 
    filter: blur(1px) brightness(1);
    opacity: 0.8;
  }
  100% { 
    filter: blur(2px) brightness(1.2);
    opacity: 1;
  }
}

@keyframes affine-warp {
  0% { 
    --warp-angle: 0;
    --warp-x: 0;
    --warp-y: 0;
    --warp-skew-x: 0;
    --warp-skew-y: 0;
  }
  25% { 
    --warp-angle: 15;
    --warp-x: 2;
    --warp-y: -1;
    --warp-skew-x: 1;
    --warp-skew-y: -0.5;
  }
  50% { 
    --warp-angle: 30;
    --warp-x: 0;
    --warp-y: 2;
    --warp-skew-x: 0;
    --warp-skew-y: 1;
  }
  75% { 
    --warp-angle: 45;
    --warp-x: -2;
    --warp-y: 0;
    --warp-skew-x: -1;
    --warp-skew-y: 0;
  }
  100% { 
    --warp-angle: 0;
    --warp-x: 0;
    --warp-y: 0;
    --warp-skew-x: 0;
    --warp-skew-y: 0;
  }
}

@keyframes vertex-jitter {
  0% { transform: translate(0px, 0px); }
  50% { transform: translate(0.5px, -0.3px); }
  100% { transform: translate(-0.3px, 0.5px); }
}

@keyframes vertex-jitter-subtle {
  0% { transform: translate(0px, 0px); }
  25% { transform: translate(0.2px, -0.1px); }
  50% { transform: translate(-0.1px, 0.2px); }
  75% { transform: translate(0.1px, -0.2px); }
  100% { transform: translate(0px, 0px); }
}

@keyframes vertex-jitter-intense {
  0% { transform: translate(0px, 0px) scale(1); }
  100% { transform: translate(1px, -1px) scale(1.01); }
}

/* ==== UTILITY CLASSES ==== */

/* Performance optimization utilities */
.ps1-gpu-layer {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  contain: layout style paint;
}

.ps1-no-subpixel {
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: unset;
  text-rendering: geometricPrecision;
  image-rendering: crisp-edges;
}

.ps1-memory-efficient {
  contain: strict;
  content-visibility: auto;
  will-change: auto;
}

/* Debug helpers */
.ps1-debug-bounds {
  outline: 1px dashed rgba(255, 0, 0, 0.5);
  background: rgba(255, 0, 0, 0.1);
}

.ps1-debug-layers::before {
  content: 'PS1-LAYER';
  position: absolute;
  top: 2px;
  left: 2px;
  font-size: 8px;
  font-family: monospace;
  color: #00ff00;
  background: rgba(0, 0, 0, 0.7);
  padding: 1px 3px;
  z-index: 1000;
  pointer-events: none;
}

/* ==== INTEGRATION HOOKS ==== */

/* Classes for dynamic parallax JavaScript integration */
.ps1-parallax-js-ready {
  --parallax-initialized: 1;
}

.ps1-parallax-mouse-active {
  --mouse-parallax: 1;
}

.ps1-parallax-scroll-active {
  --scroll-parallax: 1;
}

/* GPU monitoring integration hooks */
.ps1-gpu-monitored {
  --gpu-monitoring: 1;
}

.ps1-performance-critical {
  --performance-mode: critical;
}

.ps1-performance-optimal {
  --performance-mode: optimal;
}

.ps1-performance-power-save {
  --performance-mode: power-save;
}

/* Feature detection utilities */
.ps1-webgl-supported {
  --webgl-available: 1;
}

.ps1-webgpu-supported {
  --webgpu-available: 1;
}

.ps1-hardware-accelerated {
  --hw-acceleration: 1;
}

/* Responsive breakpoints for PS1 effects */
@media (min-width: 1920px) and (min-height: 1080px) {
  .ps1-4k-enhanced {
    --resolution-tier: 4k;
    filter: contrast(1.1) saturate(1.05) brightness(1.02);
  }
}

@media (max-width: 768px) {
  .ps1-mobile-optimized {
    --resolution-tier: mobile;
    filter: contrast(0.95) saturate(0.9);
  }
  
  .ps1-mobile-optimized .ps1-subsample::before,
  .ps1-mobile-optimized .ps1-aa-soft::after {
    opacity: 0.5;
  }
}